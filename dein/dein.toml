# Shougo-san's
# dein {{{
[[plugins]]
repo = 'Shougo/dein.vim'
# }}}

# denite {{{
[[plugins]]
repo = 'Shougo/denite.nvim'
hook_add = '''
  nnoremap [denite]  :Denite
  nnoremap [denite]b :Denite buffer -highlight-mode-insert=Search<CR>
  nnoremap [denite]g :Denite grep<CR>
  nnoremap [denite]r :Denite -resume<CR>
  nnoremap [denite]h :Denite file_old -highlight-mode-insert=Search<CR>
  call denite#custom#map('insert', '<C-n>', '<denite:move_to_next_line>', 'noremap')
  call denite#custom#map('insert', '<C-p>', '<denite:move_to_previous_line>', 'noremap')

'''
hook_post_source = '''
  call denite#custom#var('file_rec', 'command', ['ag', '--follow', '--nocolor', '--nogroup', '-g', ''])
  call denite#custom#var('grep', 'command', ['ag'])
  call denite#custom#var('grep', 'recursive_opts', [])
  call denite#custom#var('grep', 'pattern_opt', [])
  call denite#custom#var('grep', 'default_opts', ['--follow', '--no-group', '--no-color'])
'''
# }}}

# deoplete {{{
[[plugins]]
repo = 'Shougo/deoplete.nvim'
hook_add = '''
  let g:deoplete#enable_at_startup = 1
  set completeopt+=noinsert
'''
# }}}

# vimproc {{{
[[plugins]]
repo = 'Shougo/vimproc.vim'
hook_add = '''
  " vimprocで非同期実行
  " 成功時にバッファ、失敗時にQuickFixで表示
  " 結果表示のサイズ調整など
  let g:quickrun_config = {
      \ '_' : {
          \ 'runner' : 'vimproc',
          \ 'runner/vimproc/updatetime' : 40,
          \ 'outputter' : 'error',
          \ 'outputter/error/success' : 'buffer',
          \ 'outputter/error/error'   : 'quickfix',
          \ 'outputter/buffer/split' : ':botright 8sp',
      \ }
  \}

  " 実行時に前回の表示内容をクローズ&保存してから実行
  let g:quickrun_no_default_key_mappings = 1
  nmap <Leader>r :cclose<CR>:write<CR>:QuickRun -mode n<CR>
'''
hook_post_update = '''
  if dein#util#_is_windows()
    let cmd = 'tools\\update-dll-mingw'
  elseif dein#util#_is_cygwin()
    let cmd = 'make -f make_cygwin.mak'
  elseif executable('gmake')
    let cmd = 'gmake'
  else
    let cmd = 'make'
  endif
  let g:dein#plugin.build = cmd
'''
# }}}


# Common
# vim-anzu {{{
[[plugins]]
repo = 'osyo-manga/vim-anzu'
hook_add = '''
  let g:anzu_status_format = 'search : %#WarningMsg#%p %#Keyword#(%i/%l)%#None# : status'
  nnoremap <Esc><Esc> :nohlsearch<CR>
  nmap n <Plug>(anzu-n-with-echo)
  nmap N <Plug>(anzu-N-with-echo)
  nmap * <Plug>(anzu-star-with-echo)N
  nmap # <Plug>(anzu-)sharp-with-echo)N
'''
# }}}

# lightline {{{
[[plugins]]
repo = 'itchyny/lightline.vim'
depends = ['osyo-manga/vim-anzu']
hook_add = '''
  let g:lightline = {
    \ 'colorscheme': 'powerline',
    \ 'active': {
      \   'left': [
      \       ['mode', 'paste'],
      \       ['readonly', 'filename', 'modified', 'anzu']
      \   ]
      \ },
      \ 'component_function': {
      \   'anzu': 'anzu#search_status'
      \ }
    \ }
  let g:unite_force_overwrite_statusline    = 0
  let g:vimfiler_force_overwrite_statusline = 0
  let g:vimshell_force_overwrite_statusline = 0
''' 
# }}}

# yankaround {{{
[[plugins]]
repo = 'LeafCage/yankround.vim'
hook_add = '''
  nmap p <Plug>(yankround-p)
  xmap p <Plug>(yankround-p)
  nmap P <Plug>(yankround-P)
  nmap gp <Plug>(yankround-gp)
  xmap gp <Plug>(yankround-gp)
  nmap gP <Plug>(yankround-gP)
  nmap <C-p> <Plug>(yankround-prev)
  nmap <C-n> <Plug>(yankround-next)
'''
# }}}

# ctrlp {{{
[[plugins]]
repo = 'kien/ctrlp.vim'
hook_add = '''
  let g:ctrlp_map = '<C-f>'
  let g:ctrlp_working_path_mode = ""
  let g:ctrlp_max_files=0
  let g:ctrlp_custom_ignore = '\v[\/]\.?(git|hg|svn|node_modules|bower_components)$'
  let g:ctrlp_prompt_mappings = {
    \ 'PrtBS()':              ['<bs>'],
    \ 'PrtDeleteWord()':      ['<del>'],
    \ 'PrtCurEnd()':          ['<nop>'],
    \ 'PrtCurLeft()':         ['<nop>'],
    \ 'PrtCurRight()':        ['<nop>'],
    \ 'PrtHistory(-1)':       ['<nop>'],
    \ 'PrtHistory(1)':        ['<nop>'],
    \ 'PrtInsert()':          ['<nop>'],
    \ 'PrtCurStart()':        ['<nop>'],
    \ 'PrtClearCache()':      ['<c-r>'],
    \ 'PrtDeleteEnt()':       ['<nop>'],
    \ 'PrtClear()':           ['<c-d>'],
    \ 'PrtExit()':            ['<nop>', '<esc>', '<c-c>'],
    \ 'PrtExpandDir()':       ['<tab>'],
    \ 'PrtDelete()':          ['<nop>'],
    \ 'PrtSelectMove("t")':   ['<nop>'],
    \ 'PrtSelectMove("b")':   ['<nop>'],
    \ 'PrtSelectMove("u")':   ['<nop>'],
    \ 'PrtSelectMove("d")':   ['<nop>'],
    \ 'ToggleRegex()':        ['<F5>'],
    \ 'ToggleByFname()':      ['<nop>'],
    \ 'ToggleFocus()':        ['<nop>'],
    \ 'ToggleType(1)':        ['<nop>'],
    \ 'ToggleType(-1)':       ['<nop>'],
    \ 'AcceptSelection("e")': ['<cr>'], 
    \ 'AcceptSelection("h")': ['<nop>'], 
    \ 'AcceptSelection("t")': ['<nop>'],
    \ 'AcceptSelection("v")': ['<nop>'],
    \ 'CreateNewFile()':      ['<nop>'],
    \ 'MarkToOpen()':         ['<nop>'],
    \ 'OpenMulti()':          ['<nop>'],
    \ }
'''
# }}}

# vim-textmanip {{{
[[plugins]]
repo = 't9md/vim-textmanip'
hook_add = '''
  vmap <C-j> <Plug>(textmanip-move-down)
  vmap <C-k> <Plug>(textmanip-move-up)
  vmap <C-h> <Plug>(textmanip-move-left)
  vmap <C-l> <Plug>(textmanip-move-right)
'''
# }}}

# vim-parenmatch {{{
[[plugins]]
repo = 'itchyny/vim-parenmatch'
hook_add = 'let g:loaded_matchparen = 1'
# }}}

# vim-cursorword {{{
[[plugins]]
repo = 'itchyny/vim-cursorword'
# }}}

# incsearch {{{
[[plugins]]
repo = 'haya14busa/incsearch.vim'
hook_add = '''
  let g:incsearch#auto_nohlsearch = 1
'''
# }}}

#  vim-gitgutter {{{
[[plugins]]
repo = 'airblade/vim-gitgutter'
hook_add = '''
  let g:gitgutter_enabled         = 0
  let g:gitgutter_highlight_lines = 0

  nnoremap [prefix]gg :GitGutterToggle<CR>
  nnoremap [prefix]gn :GitGutterNextHunk<CR>
  nnoremap [prefix]gN :GitGutterPrevHunk<CR>
'''
# }}}

# Key operation enhancer
# vim-arpeggio {{{
[[plugins]]
repo = 'kana/vim-arpeggio'
hook_source = '''
  if !exists('g:arpeggio_loaded')
    let g:arpeggio_loaded = 1
  
  " Settings
  call arpeggio#load()
    let g:arpeggio_timeoutlen = 70
   
    " Window
    Arpeggio nnoremap wh <C-w>h
    Arpeggio nnoremap wj <C-w>j
    Arpeggio nnoremap wk <C-w>k
    Arpeggio nnoremap wl <C-w>l
    Arpeggio nnoremap wo <C-w>o " close all but current window
    Arpeggio nnoremap wc <C-w>c " close current window
    Arpeggio nnoremap wq <C-w>c " close current window
    Arpeggio nnoremap w8 <C-w>s<Plug>(anzu-star)N
    Arpeggio nnoremap w3 <C-w>s<Plug>(anzu-sharp)N
    Arpeggio nnoremap wr <C-w>r " 回転

    " Resize
    Arpeggio nnoremap eh <C-w><
    Arpeggio nnoremap ej <C-w>+
    Arpeggio nnoremap ek <C-w>-
    Arpeggio nnoremap el <C-w>>
    
    " Split
    Arpeggio nnoremap sh :vsp<CR>
    Arpeggio nnoremap sj :sp<CR><C-w>j
    Arpeggio nnoremap sk :sp<CR>
    Arpeggio nnoremap sl :vsp<CR><C-w>l
    
    " Easy Motion
    Arpeggio nmap em _w
    Arpeggio nmap EM _b
  
  endif
'''
# }}}

# clever-f {{{
[[plugins]]
repo = 'rhysd/clever-f.vim'
hook_source = '''
  let g:clever_f_across_no_line    = 0
  let g:clever_f_ignore_case       = 1
  let g:clever_f_use_migemo        = 1
  let g:clever_f_fix_key_direction = 0
  let g:clever_f_show_prompt       = 1
'''
# }}}

# vim-surround {{{
[[plugins]]
repo = 'tpope/vim-surround'
# }}}

# vim-easymotion {{{
[[plugins]]
repo = 'Lokaltog/vim-easymotion'
hook_add = '''
  let s:EasyMotion_keys       = 'hjklasdgqwertyuiopzxcvbnm'
  let g:EasyMotion_leader_key = '_'
  let g:EasyMotion_grouping   = 1
  
  hi clear EasyMotionTarget
  hi clear EasyMotionShade
  hi EasyMotionTarget ctermbg=none ctermfg=12  guibg=NONE guifg=#aa0000
  hi EasyMotionShade  ctermbg=none ctermfg=232 guibg=NONE guifg=#222222
'''
# }}}

# vim-alignta {{{
[[plugins]]
repo = 'h1mesuke/vim-alignta'
hook_add = '''
	"nnoremap [unite]a :<C-u>Unite alignta:options<CR>
	"xnoremap [unite]a :<C-u>Unite alignta:arguments<CR>

	let g:unite_source_alignta_preset_arguments = [
		\ ["Align at '='", '=>\='],
		\ ["Align at ':'", '01 :'],
		\ ["Align at ':'", '11 :'],
		\ ["Align at ':'", '01 :/1'],
		\ ["Align at ':'", '11 :/1'],
		\ ["Align at '|'", '|'   ],
		\ ["Align at ')'", '0 )' ],
		\ ["Align at ']'", '0 ]' ],
		\ ["Align at '}'", '}'   ],
	\]

	vnoremap a  :Alignta
	vnoremap a= :Alignta =<CR>
	vnoremap a+ :Alignta +<CR>
	vnoremap a: :Alignta 11 :/1<CR>
	vnoremap a; :Alignta 11 :/1<CR>
	vnoremap a, :Alignta 01 ,<CR>
'''
# }}}

# Visual Style 
# molokai {{{
[[plugins]]
repo = 'tomasr/molokai'
hook_add = '''
  let g:molokai_original = 1
  let g:rehash256 = 1
'''
# }}}

# Runner
# vim-quickrun {{{
[[plugins]]
repo = 'thinca/vim-quickrun'
hook_add = '''
  "nnoremap [prefix]rm :QuickRun markdown<CR>
  nnoremap [prefix]r :QuickRun<CR>
  " <C-c> で実行を強制終了させる
  " quickrun.vim が実行していない場合には <C-c> を呼び出す
  nnoremap <expr><silent> <C-c> quickrun#is_running() ? quickrun#sweep_sessions() : "\<C-c>"

  let g:quickrun_config = {}
  let g:quickrun_config['_'] = {
    \ 'hook/echo/priority_exit'                      : 100,
    \ 'hook/echo/enable_output_exit'                 : 1,
    \ 'hook/close_unite_quickfix/enable_hook_loaded' : 1,
    \ 'hook/unite_quickfix/enable_failure'           : 1,
    \ 'hook/close_quickfix/enable_exit'              : 1,
    \ 'hook/close_buffer/enable_failure'             : 1,
    \ 'hook/close_buffer/enable_empty_data'          : 1,
    \ 'hook/time/enable'                             : 1,
    \ 'outputter'                                    : 'error',
    \ 'outputter/error/success'                      : 'buffer',
    \ 'outputter/error/error'                        : 'quickfix',
    \ 'outputter/buffer/split'                       : ':right 8sp',
    \ 'outputter/buffer/close_on_empty'              : 1,
    \ 'runner'                                       : 'vimproc',
    \ 'runner/vimproc/updatetime'                    : 40,
    \ }
'''
# }}}

